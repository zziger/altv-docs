<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Resource communication </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Resource communication ">
    <meta name="generator" content="docfx 2.56.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../../styles/colors.css">
    <link rel="stylesheet" href="../../styles/discord.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>

  <body>
        <div class="top-navbar">

            <a href="javascript:void(0);" class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../../index.html">
              <img src="../../logo.svg" alt="" class="logomark">
              <span class="brand-title"></span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    
                    
                    <div>
                      
                      <a class="brand" href="../../index.html">
                        <img src="../../logo.svg" alt="" class="logomark">
                        <span class="brand-title"></span>
                      </a>
                      <div id="navbar">
                    
                      </div>
                    
                    </div>
                    

                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  
                  <span>Generated by <strong>DocFX</strong></span>
                </div>
            </nav>

            <main class="main-panel">


                <div role="main" class="hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                          <div class="contribution mobile-hide">
                            <ul class="level1 breadcrumb">
                              <li>
                                <a href="https://github.com/FabianTerhorst/coreclr-module/blob/master/docs/articles/resource-communication.md/#L1" class="contribution-link">Improve this Doc</a>
                              </li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="">
<h1 id="resource-communication">Resource communication</h1>

<p>This article will describe how to communicate between different server resources.</p>
<h2 id="export-data">Export data</h2>
<p>Resources can define data that other resources can access while the resource is starting. This data is immutable after resource finished starting and can be accessed from any serverside resource.</p>
<pre><code class="lang-cs">public class SampleResource : AsyncResource
{
  public override void OnStart()
  {
    var value = &quot;test&quot;;
    Alt.Export(&quot;myDataKey&quot;, value);
  }
}
</code></pre>
<p>You can export any data you can also send via events. Including: <code>object</code>, <code>bool</code>, <code>int</code>, <code>long</code>, <code>uint</code>, <code>ulong</code>, <code>float</code>, <code>double</code>, <code>string</code>, <code>IPlayer</code> (or any types extending IPlayer), <code>IVehicle</code> (or any types extending IVehicle), <code>Dictionary&lt;string, (any type listed here)</code>, <code>Alt.Function</code>, any type listed here as array e.g. int[].
Also any dictionary in dictionary, array in array, ect. endless depth types are supported, because they are resolved recursively.</p>
<h3 id="export-functions">Export functions</h3>
<p>Functions are also possible to export. Supported function parameters are same types supported by events and exports.</p>
<pre><code class="lang-cs">public class SampleResource : AsyncResource
{
  public override void OnStart()
  {
    Alt.Export(&quot;myFunction&quot;, new Action&lt;int&gt;(Myfunc));
    
    Alt.Export(&quot;myFunction2&quot;, new Func&lt;int, bool&gt;(Myfunc2));
  }
  
  public void Myfunc(int myInt)
  {
            
  }
  
  public bool Myfunc2(int myInt)
  {
            
  }
}
</code></pre>
<h2 id="import-data">Import data</h2>
<p>Resources can import data that got exported from other resources. Most likely you will define the resource where you import from as <code>deps: [ myResource, myResource2 ]</code> in your <code>resource.cfg</code> to make sure the resource is already started when your resource starts.
You also have to define the resource name where you import data from.</p>
<pre><code class="lang-cs">public class SampleResource : AsyncResource
{
  public override void OnStart()
  {
    Alt.Import(&quot;myResourceToImportFrom&quot;, &quot;myFunction&quot;, out Action&lt;int&gt; myFunction);
    
    myFunction(13);
  }
}
</code></pre>
<p>This works the same with functions that return data. The return type is always the last generic type in <code>Func&lt;...&gt;</code>.</p>
<pre><code class="lang-cs">public class SampleResource : AsyncResource
{
  public override void OnStart()
  {
    Alt.Import(&quot;myResourceToImportFrom&quot;, &quot;myFunction2&quot;, out Func&lt;int, bool&gt; myFunction);
    
    Console.WriteLine(myFunction(13));
  }
}
</code></pre>
<h2 id="events">Events</h2>
<p>Another way to communicate with resources is by sending events to them. The <code>Alt.Emit(&quot;eventName&quot;, values)</code> works same as player events and supports all data types that are supported by exports.
Every resource will get notified about the event. You can listen explicit for server events via <code>Alt.OnServer(&quot;eventName&quot;, OnServerEvent)</code>.
The server event delegate needs to have to following signature.</p>
<pre><code class="lang-cs">public void OnServerEvent(object[] args)
{
}
</code></pre>
</article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../../styles/url.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script type="text/javascript" src="../../styles/docfx.js"></script>
<script type="text/javascript" src="../../styles/main.js"></script>

    </body>

</html>
